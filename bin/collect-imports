#!/usr/bin/env python
"""
collect-imports *.py
collect-imports < foo.py

Collect all imports from named files or stdin, and combine them into a single
block of import statements.  Print the result to stdout.

"""

from __future__ import absolute_import, division, with_statement

import sys

from   pyflyby.cmdline          import filename_args, parse_args
from   pyflyby.file             import read_file
from   pyflyby.importstmt       import Imports

def main():
    options, args = parse_args(import_format_params=True)
    contents = [read_file(fn) for fn in filename_args(args)]
    imports = Imports.from_code(contents, filter_nonimports=True)
    sys.stdout.write(imports.pretty_print(
            allow_conflicts=True, params=options.params))


if __name__ == '__main__':
    main()

