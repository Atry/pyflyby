#!/usr/bin/env python
"""
tidy-imports *.py
tidy-imports < foo.py

Automatically improves python import statements.

  - Adds missing imports and mandatory imports.
  - Removes unused imports.
  - Nicely formats imports (sorts, aligns, wraps).

If filenames are given on the command line, rewrites them.  Otherwise, if
stdin is not a tty, read from stdin and write to stdout.

Only top-level import statements are touched.

"""

from __future__ import absolute_import, division, with_statement

from   pyflyby.cmdline          import filename_args, parse_args
from   pyflyby.file             import modify_file
from   pyflyby.imports2s        import fix_unused_and_missing_imports

def main():
    options, args = parse_args()
    def modifier(x):
        return fix_unused_and_missing_imports(x, params=options.params)
    for filename in filename_args(args):
        modify_file(filename, modifier)


if __name__ == '__main__':
    main()

